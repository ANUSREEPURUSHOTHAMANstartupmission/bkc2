---
import "../style/home.scss"; 
---
<!-- <script src="../../js/threed.js" is:inline></script> -->

<section id="main-section">
  <div class="scene w-screen h-screen"></div>  
  <div class="overlay w-full h-full z-10"></div>

  <div id="video-slider" class="z-20 w-full flex container flex-col">
    <div id="info-container">
       <div id="main-slider" class="dl-slider">
        <div class="single-slide">
            <div class="slider-content-wrap d-flex align-items-center text-left">
                <div class="">
                    <div class="slider-content">
                        <div class="dl-caption medium">
                            <!-- <div class="inner-layer">
                                <div data-animation="fade-in-bottom" data-delay="1s">തിരികെ</div>
                            </div> -->
                        </div>
                        <div class="dl-caption big">
                            <div class="inner-layer">
                                <div data-animation="fade-in-bottom" >Back to Kerala <br>Campaign</div>
                            </div>
                        </div>
                        <div class="dl-caption small">
                            <div class="inner-layer">
                                <div class="text-white md:max-w-3xl" data-animation="fade-in-bottom">
                                    Connecting Malayali professionals worldwide with new opportunities in Kerala’s growing tech and innovation ecosystem. Join the movement to return, rebuild, and reimagine Kerala as a hub for global capability centres and startups. Be part of Kerala’s transformation into a global tech hub — contribute your skills, experience, and leadership to power the state’s next wave of growth.
                                </div>
                            </div>
                        </div>
                        <div class="dl-btn-group">
                            <div class="inner-layer">
                                <a href="/#about" class="page-scroll  default-btn" data-animation="fade-in-bottom">Learn More<span></span><i class="arrow_right"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       
    </div>
    </div>
  </div>
</section>




<script>
import * as THREE from 'three';
import GLTFLoader from 'three-gltf-loader';

let container;
let camera;
let renderer;
let scene;
let house;

function init() {
  container = document.querySelector(".scene");
  container.classList.add("loading");
  //Create scene
  scene = new THREE.Scene();

  const fov = 35;
  const aspect = container.clientWidth / container.clientHeight;
  const near = 0.1;
  const far = 50000;

  //Camera setup
  camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
  // camera.position.set(0, 2, 20);
  // camera.position.set(0, 2, 30);
  // camera.position.set(0, 10, -3000);
  camera.position.set(0, 10, 4000);

  const ambient = new THREE.AmbientLight(0x404040, 2);
  scene.add(ambient);

  const light = new THREE.DirectionalLight(0xffffcc, 10);
  light.position.set(0, 200, 8500);
  scene.add(light);

  const light1 = new THREE.DirectionalLight(0xffffff, 2);
  light1.position.set(0, 0, 10);
  scene.add(light1);

  //Renderer
  renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.setPixelRatio(window.devicePixelRatio);

  container.appendChild(renderer.domElement);

  //Load Model
  const loader = new GLTFLoader();
  loader.load("../../static/boeing_787/scene.gltf", function(gltf) {
    container.classList.remove("loading");
    scene.add(gltf.scene);
    house = gltf.scene.children[0];
    house.rotation.z += 90;
    // house.rotation.z -= 90;
    // house.rotation.x -= 50;
    // house.rotation.y += 10;


    house.position.z -= 1000;
    house.position.x -= 4000;
    // console.log(house.position);
    animate();
  });
}

function animate() {
  requestAnimationFrame(animate);
  house.position.z -= 50;
  house.position.x += 50;

  // x: 29000, y: 0, z: -34000
  // {x: -4000, y: 0, z: -1000}
  if (house.position.x > 29000) {
    house.position.x = -4000;
    house.position.z = -1000;
  }
  // console.log({...house.position });
  // house.position.y += 50;

  // house.rotation.z += 0.005;
  // house.rotation.y += 0.005;
  // house.rotation.x += 0.005;
  renderer.render(scene, camera);
}

// setTimeout(function() {
//   house.position.x = 39350;
//   house.position.z = -44350;
//   // x: 39350
//   // y: 0
//   // z: -44350
//   animate();
// }, 5000)

init();

function onWindowResize() {
  camera.aspect = container.clientWidth / container.clientHeight;
  camera.updateProjectionMatrix();

  renderer.setSize(container.clientWidth, container.clientHeight);
}

window.addEventListener("resize", onWindowResize);
</script>